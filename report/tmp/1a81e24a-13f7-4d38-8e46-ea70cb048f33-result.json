{"name": "添加食品种类用例", "status": "broken", "statusDetails": {"message": "KeyError: 'code'", "trace": "self = <testCase.test_food_manage.TestFoodManage object at 0x000002CBDA320940>\ntitle = '商铺id为空', req_body = {'restaurant_id': ''}\nexp_resp = {'error': 'Bad Request', 'status': 400}\nfood_init = <libs.foodManage.FoodManage object at 0x000002CBDA2E8550>\n\n    @allure.story('添加食品种类')  # 接口的名称\n    @allure.title('添加食品种类用例')  # 用例的标题\n    @pytest.mark.food_add_kind  # 添加食品种类标签\n    @pytest.mark.parametrize('title,req_body,exp_resp', get_excel_data('食品管理', 'Addfoodkind'))\n    @allure.title(\"{title}\")\n    def test_add_food_kind(self, title, req_body, exp_resp, food_init):\n        if req_body['restaurant_id'] == '3269':\n            req_body['restaurant_id'] = food_init.list_food({\"page\": 1, \"limit\": 1})['data']['records'][0][\n                'restaurant_id']\n        res = food_init.add(req_body)\n        '''\n        如果断言不是一个属性，需要多个组合判断？\n        原理：assert   布尔表达式       多个条件使用and  or\n        '''\n        if res.get(\"code\"):\n>           self.api_assert(res, '=', exp_resp, assert_info='code')\n\ntest_food_manage.py:28: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n..\\common\\apiAssert.py:40: in api_assert\n    raise error\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ncls = <class 'testCase.test_food_manage.TestFoodManage'>\nresult = {'code': 20000, 'data': '', 'flag': '松勤教育', 'msg': '成功', ...}\ncondition = '=', exp_result = {'error': 'Bad Request', 'status': 400}\nassert_info = 'code', msg = '断言操作'\n\n    @classmethod  # 类方法\n    def api_assert(cls, result, condition, exp_result, assert_info, msg='断言操作'):\n        assert_detail= '实际结果:{0},预期结果:{1}'\n        \"\"\"\n        :param result:  实际返回数据\n        :param condition: 判断条件\n        :param exp_result: 预期的返回数据\n        :param assert_info: 断言的关键信息  code   msg\n        :param msg: 操作描述\n        :return: 断言结果\n        \"\"\"\n        try:\n            assert_type = {\n>               \"==\": result[assert_info] == exp_result[assert_info],\n                \"!=\": result[assert_info] != exp_result[assert_info],\n                \"in\": result[assert_info] in exp_result[assert_info] if  isinstance(exp_result[assert_info],list) else  False ,\n            }\nE           KeyError: 'code'\n\n..\\common\\apiAssert.py:27: KeyError"}, "attachments": [{"name": "log", "source": "6df7e9b2-8b82-4f82-a3ab-506d02e5b01f-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "title", "value": "'商铺id为空'"}, {"name": "req_body", "value": "{'restaurant_id': ''}"}, {"name": "exp_resp", "value": "{'error': 'Bad Request', 'status': 400}"}], "start": 1705753992170, "stop": 1705753992249, "uuid": "6bc2d01a-b760-42f6-b9cd-d0707cd06b7f", "historyId": "404828e1796e8b17a5e8b83a3ac33cbb", "testCaseId": "56f3514ecfe49c044bbd9936040f8b38", "fullName": "testCase.test_food_manage.TestFoodManage#test_add_food_kind", "labels": [{"name": "story", "value": "添加食品种类"}, {"name": "feature", "value": "食品模块"}, {"name": "epic", "value": "订餐系统"}, {"name": "tag", "value": "food_add_kind"}, {"name": "tag", "value": "food"}, {"name": "parentSuite", "value": "testCase"}, {"name": "suite", "value": "test_food_manage"}, {"name": "subSuite", "value": "TestFoodManage"}, {"name": "host", "value": "DESKTOP-1LCDIJF"}, {"name": "thread", "value": "18840-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testCase.test_food_manage"}]}